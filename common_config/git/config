[core]
    mode = progress
[diff]
    colorMoved = default
    algorithm = histogram
    mnemonicPrefix = true
[fetch]
    prune = true
[user]
    name = Siva Mahadevan
    email = me@svmhdvn.name
#    signingKey = F1299E0B6ED2B95B
[push]
    default = simple
    followTags = true
[pull]
    rebase = true
[sendemail]
    assume8bitencoding = utf-8
    smtpserver = smtp.migadu.com
    smtpuser = mbsync-msmtp@svmhdvn.name
    smtpencryption = ssl
    smtpserverport = 465
    #smtpserver = msmtp
    annotate = yes
[commit]
    #gpgsign = true
[init]
    defaultBranch = main
[format]
    coverletter = auto
[merge]
    # Gives you meld with three comparison tabs
    tool = meld "$LOCAL" "$BASE" "$REMOTE" --output "$MERGED" --diff "$BASE" "$LOCAL" --diff "$BASE" "$REMOTE" --auto-merge
    conflictstyle = diff3
[mergetool]
    keepBackup = false
[alias]
    # pretty log
    mylog = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'

    # Finds the merge commit that introduced a specific commit SHA to the current branch
    myfind-merge = "!sh -c 'commit=$0 && branch=${1:-HEAD} && (git rev-list $commit..$branch --ancestry-path | cat -n; git rev-list $commit..$branch --first-parent | cat -n) | sort -k2 -s | uniq -f1 -d | sort -n | tail -1 | cut -f2 | xargs git show'"

    # push to all my mirrors
    mypushall = push --all !git remote | xargs -n1 git push --all

[credential]
    helper = store
